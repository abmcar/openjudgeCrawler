import re

import requests


def request_dandan(url):
    try:
        response = requests.get(url)
        if response.status_code == 200:
            return response.text
    except requests.RequestException:
        return None


def parse_result(html):
    pattern = re.compile('<tr ><td>解决<td align=center><a href=.*?>(.*?)</a>', re.S)
    items = re.findall(pattern, html)
    # print(items)
    return items[0]


# def main(page):
#     url = 'http://acm.zzuli.edu.cn/userinfo.php?user=' + x[page]
#     html = request_dandan(url)
#     items = parse_result(html)  # 解析过滤我们想要的信息
#     for item in items:
#         mp[x[page]] = int(item["user"])


def get_solve_num(uid):
    url = 'http://acm.zzuli.edu.cn/userinfo.php?user=' + uid
    html = request_dandan(url)
    items = parse_result(html)  # 解析过滤我们想要的信息
    # print(items)
    return int(items)


# if __name__ == "__main__":
#     x = ['2015045064', '2015045055--MH', '2015185075', '2015045054', '2015185065', '2015185072', '2015045012',
#          '2009115044', '2015045044', '2009135029', '2002065020', '2015185067', '2009115045', '2015185022', '2010045026',
#          '2015045032', '2015045093', '2015045059', '2015045021', '2010035018', '2015105600', '2015045006', '2009115019',
#          '2015185013', '2015045022', '2009115018', 'wnzr', '2015185008', '2015185018', '2015045015', '2002065022',
#          '2010045028', '2015045082', '2015185073', '2015045055', '2015045007', '2015045046', '2009045019']
#     y = {'2015045064': '扶灿星', '2015045055--MH': '马星宇', '2015185075': '黄昭荣', '2015045054': '张斌', '2015185065': '李海亮',
#          '2015185072': '黄锦山', '2015045012': '杜定帮', '2009115044': '郭久裕', '2015045044': '杨广磊', '2009135029': '周子墨',
#          '2002065020': '朱远征', '2015185067': '牛春颖', '2009115045': '王凯', '2015185022': '赖子彬', '2010045026': '靳矗',
#          '2015045032': '魏应卓', '2015045093': '王佳琦', '2015045059': '陈志强', '2015045021': '杜昊阳', '2010035018': '张世兴',
#          '2015105600': '邵昱原', '2015045006': '吴奕冰', '2009115019': '王哲辉', '2015185013': '陆博元', '2015045022': '韩爽',
#          '2009115018': '刘正', 'wnzr': '伍城然', '2015185008': '杨铭伟', '2015185018': '魏沅明', '2015045015': '王帅',
#          '2002065022': '张峰榕', '2010045028': '王祥', '2015045082': '牛铜', '2015185073': '邓莉欣', '2015045055': '马星宇',
#          '2015045007': '张旭', '2015045046': '高枫', '2009045019': '王传才'}
#     mp = {'2015045064': 0, '2015045055--MH': 0, '2015185075': 0, '2015045054': 0, '2015185065': 0,
#           '2015185072': 0, '2015045012': 0, '2009115044': 0, '2015045044': 0, '2009135029': 0,
#           '2002065020': 0, '2015185067': 0, '2009115045': 0, '2015185022': 0, '2010045026': 0, '2015045032': 0,
#           '2015045093': 0, '2015045059': 0, '2015045021': 0, '2010035018': 0, '2015105600': 0, '2015045006': 0,
#           '2009115019': 0, '2015185013': 0, '2015045022': 0, '2009115018': 0, 'wnzr': 0, '2015185008': 0,
#           '2015185018': 0, '2015045015': 0, '2002065022': 0, '2010045028': 0, '2015045082': 0, '2015185073': 0,
#           '2015045055': 0, '2015045007': 0, '2015045046': 0, '2009045019': 0}
#     for i in range(len(x)):
#         main(i)
#         print(mp[x[i]])
#
#     d_order = sorted(mp.items(), key=lambda z: z[1], reverse=True)
#     k = 1
#     for x in d_order:
#         tplt = "{0:{2}^10}\t{1:^10}"
#         print("{: 4}".format(k), end='')
#         print(tplt.format(y[x[0]], x[1], chr(12288)))
#         k = k + 1
#     input()
